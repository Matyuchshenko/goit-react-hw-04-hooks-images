(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},74:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n(0),c=n.n(r),o=n(5),s=n.n(o),u=(n(28),n(6)),i=n.n(u),l=n(13),f=n(9),b=n(4),d=n(10),j=(n(30),function(e){var t=e.children;return Object(a.jsx)("div",{className:"container",children:t})}),m=n(22),h=n.n(m);n(51);function g(e){var t=e.onHandleSubmit,n=Object(r.useState)(""),c=Object(b.a)(n,2),o=c[0],s=c[1];return Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:function(e){if(e.preventDefault(),""===o.trim())return d.b.info("Please enter a value for search images");t(o),s("")},children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm__button",children:Object(a.jsx)("span",{className:"SearchForm__button__label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm__input",type:"text",value:o,autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",onChange:function(e){var t=e.target;return s(t.value)}})]})})}n(52);function p(e){var t=e.webformatURL,n=e.largeImageURL,r=e.tags,c=e.onOpenModal;return Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{src:t,alt:r,"data-source":n,className:"ImageGalleryItem_image",onClick:c})})}p.defaultProps={src:"https://dummyimage.com/640x480/2a2a2a/ffffff&text=Photo%20not%20found",alt:""};n(53);function O(e){var t=e.images,n=e.onOpenModal;return Object(a.jsx)("ul",{className:"ImageGallery",children:t.map((function(e){var t=e.id,r=e.webformatURL,c=e.largeImageURL,o=e.tags;return Object(a.jsx)(p,{webformatURL:r,largeImageURL:c,tags:o,onOpenModal:n},t)}))})}O.defaultProps={images:[]};n(54);function v(e){var t=e.onLoadMore;return Object(a.jsx)("button",{type:"button",className:"Button",onClick:t,children:"Load more"})}v.defaultProps={onClick:function(){return null},children:null};n(55);var x=document.querySelector("#modal-root");function w(e){var t=e.children,n=e.onToggleModal;Object(r.useEffect)((function(){return window.addEventListener("keydown",c),function(){window.removeEventListener("keydown",c)}}));var c=function(e){"Escape"===e.code&&n()};return Object(o.createPortal)(Object(a.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&n()},children:Object(a.jsx)("div",{className:"Modal",children:t})}),x)}var S=n(11),y=n.n(S);y.a.defaults.baseURL="https://pixabay.com/api/",y.a.defaults.params={key:"18815450-007739eb5f1c89a4d6d918d62",image_type:"photo",orientation:"horizontal",per_page:12};var k=function(){var e=Object(f.a)(i.a.mark((function e(t,n){var a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get("",{params:{q:t,page:n}});case 3:return a=e.sent,r=a.data,e.abrupt("return",r.hits);case 8:return e.prev=8,e.t0=e.catch(0),console.log("error",{error:e.t0}),e.abrupt("return",[]);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}();function L(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)([]),s=Object(b.a)(o,2),u=s[0],m=s[1],p=Object(r.useState)(""),x=Object(b.a)(p,2),S=x[0],y=x[1],L=Object(r.useState)(1),N=Object(b.a)(L,2),F=N[0],I=N[1],_=Object(r.useState)(null),C=Object(b.a)(_,2),M=C[0],P=C[1],R=Object(r.useState)(!1),T=Object(b.a)(R,2),U=T[0],E=T[1],B=Object(r.useState)(!1),H=Object(b.a)(B,2),G=H[0],q=H[1];Object(r.useEffect)((function(){""!==n.trim()&&(E(!0),function(){var e=Object(f.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(n,F);case 3:if(0!==(t=e.sent).length){e.next=6;break}return e.abrupt("return",P("No results were found for ".concat(n,"!")));case 6:m((function(e){return[].concat(Object(l.a)(e),Object(l.a)(t))})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),P("Something went wrong. Try again.");case 12:return e.prev=12,window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"}),E(!1),e.finish(12);case 16:case"end":return e.stop()}}),e,null,[[0,9,12,16]])})));return function(){return e.apply(this,arguments)}}()())}),[F,n]);var D=function(){q(!G)},J=function(){setTimeout((function(){window.scrollBy(0,window.innerHeight+150)}),1e3)};return Object(a.jsxs)(j,{children:[Object(a.jsx)(g,{onHandleSubmit:function(e){c(e),m([]),I(1),P(null)}}),M&&Object(a.jsxs)("p",{children:["Whoops, something went wrong: ",M.message]}),u.length>0&&Object(a.jsx)(O,{images:u,onOpenModal:function(e){y(e.target.dataset.source),D()}}),U&&Object(a.jsx)(h.a,{type:"Oval",color:"#00BFFF",height:100,width:100,style:{textAlign:"center"}}),!U&&u.length>0&&Object(a.jsx)(v,{onLoadMore:function(){E(!0),I((function(e){return e+1})),J()}}),G&&Object(a.jsx)(w,{onToggleModal:D,largeImageURL:S,children:Object(a.jsx)("img",{src:S,alt:""})}),Object(a.jsx)(d.a,{autoClose:2e3})]})}var N=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,75)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)}))};s.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),N()}},[[74,1,2]]]);
//# sourceMappingURL=main.81c2f5d1.chunk.js.map